\documentclass[10pt]{article}
\setlength{\parindent}{0pt}
% \usepackage{setspace} \doublespacing
\usepackage[a4paper, total={6.3in, 9in}]{geometry}
\usepackage{graphicx}
\usepackage{listings}
\usepackage{xcolor}
\usepackage{pdfpages}

% A custom title generation command for physics labs.
\newcommand{\PLtitle}{\setlength{\parindent}{0pt}
\begin{center}

  \huge{\textbf{Lab \Lab: \Ltitle\\}}
  \normalsize 

  Physics 1320L-02 \\
  TA: \TA \\
  Date: \date\\
  Name: \author\\
  
  Team: \team\\


\end{center}
}


\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

\lstdefinestyle{mystyle}{
    backgroundcolor=\color{backcolour},   
    commentstyle=\color{codegreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=b,                    
    keepspaces=true,                 
    numbers=left,                    
    numbersep=5pt,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=2
}

\lstset{style=mystyle}

% Defining variables for PLtitle
\def\Lab{6}
\def\Ltitle{Capacitors}
\def\author{Kassidy Maberry}
\def\team{Lukas Chavez}
\def\TA{Jonathan Dooley}
\def\date{2024/03/25}
% Defining a variable for creating tabs since writing \hspace*{10mm} is tedious.
\def\tab{\hspace*{10mm}}
\def\halftab{\hspace*{5mm}}

\begin{document}
% Generate title
\PLtitle

% --- Introduction --- % 
\section{Introduction}
\tab Capacitors are devices that are capable of storing electric charge. This is done with two metal plates that
are insulated from eacother storing the charge. One plate will store a positive charge and the other will store a negative charge.
They will continue to hold this charge until the source of electricity is removed. Then the charges will begin to interact with each other
through the insulator.


% --- Methods --- %
\section{Methods}
\tab In this lab we will observe capacitors by sending a charge through four different circuits: A Parallel Connection, Series Connection, Parallel Plate capacitor and
a Cylindrical Capacitor. We will assemble the parallel connection and a series connection. Then to determine the capacitance of each of the circuits we will use an LCR meter and record the current the LCR reads.
This will provide us a reading in farads.\\

% --- Data --- %
\section{Data}

Data obtained for the effective capacitance:
\begin{table}[!h]\label{Table 1}
  \begin{center}
    \begin{tabular}{|c|c|}
      \hline
      Circuit & Capacitance (pF) \\
      \hline
      Capacitor 1    & 10.332                     \\
      \hline
      Capacitor 2    & 91.03          \\
      \hline
      Series circuit     & 9.280                    \\
      \hline
      Parallel circuit     & 101.36                 \\
      \hline
    \end{tabular}
    \caption[short]{Measurements of capacitance of various circuits.}
  \end{center}
\end{table}

Data obtained for Parrallel Plate Capacitor:
\begin{table}[!h]\label{Table 2}
  \begin{center}
    \begin{tabular}{|c|c|c|c|}
      \hline
      Measurement & distance (cm) & Capacitance (pF) & Air Capacitance (pF) \\
      \hline
      1    &  0.435 & 137.57 &     64.80              \\
      \hline
      2    &  0.315     & 219.4&   93.48 \\
      \hline
      3     &      0.640    & 123.43 &  51.71         \\
      \hline
      4     &    1.095    & 86.63 &     36.08     \\
      \hline
      5     &     1.300   & 75.62 &       32.28   \\
      \hline
      6     &    1.025    & 87.45 &       37.33   \\
      \hline
    \end{tabular}
    \caption[short]{Measurements of capacitance of a parrallel circuit.}
  \end{center}
\end{table}

Measurement of Cylindrical Capacitor\\
$d_{i} = 1.26$cm\\
$d_{o} = 2.25$cm\\
$L = 1.22$m\\
$C = 163.42$pF\\

% --- Analysis --- %
\section{Analysis}
\subsection*{Effective Capacitance}

To determine the theoretical capacitance of the parrallel 
circuit we will use Equation~\ref*{SCC}

\begin{equation}\label{SCC}
  C_{eff} = C_{1} + C_{2}
\end{equation}

Plugging in we get a $C_{eff} = 101.362$pF.\\
Then to determine the theoretical capacitance of the series 
circuit we will use Equation~\ref{PCC}.\\

\begin{equation}\label{PCC}
  \frac{1}{C_{eff}} = \frac{1}{C_{1}} + \frac{1}{C_{2}}
\end{equation}
We will need to rearrange this equation to solve for $C_{eff}$.\\
$C_{eff} = \frac{1}{\frac{1}{C_{1}} + \frac{1}{C_{2}}}$

Plugging in we get a $C_{eff} = 9.26$pF.\\

Comparing to our measured values we see that the
measurements are close to the theoretical values.
Calculating the percent error using Equation~\ref{Pe}.\\

\begin{equation}\label{Pe}
  P_{e} = \frac{|P_{theoretical} - P_{measured}|}{P_{theoretical}} * 100 \%
\end{equation}

Giving us a percent error for the parrallel capacitor $P_{e} = 0.002\%$.\\
Then giving us a percent error for the parrallel capacitor $P_{e} = 0.22\%$.\\
Seeing how low the percent error for both this could be assumed to be the inaccuracy of our
measurement devices.\\
\newpage
\subsection*{Parallel Plate Capacitor}

% 1.Plot the capacitance of acrylic, Cacrylic, versus the capacitance of air, Cair.
First let's plot the Capacitance of the air vs the acrylic. 
Plotting this we get the following figure.

\begin{figure}[ht]\label{Graph}
  \begin{center}
    \includegraphics[scale=.50]{capplot.png}
    \caption[short]{Plot of air capacitance vs acrylic capacitance in the parrallel plate capacitor. Generated with Python code shown in the appendix section.}
  \end{center}
\end{figure}
% \newpage

% 2.Use this plot and Equation 4 to determine the dielectric constant, Îº, for acrylic. (Try to figure it
% out yourself first, then ask your instructor as needed.) Be sure to explain your work.
To determine the dielectric constant we will use Equation \ref*{dik}
\begin{equation}\label{dik}
  C = k\epsilon_{o}\frac{A}{d}
\end{equation}
As the only variable in this equation that changes is k. Then the dielectric constants
can be written as a ratio of the capacitance. Giving us equation \ref*{dikr}
\begin{equation}\ref*{dikr}
  \frac{C_{acrylic}}{C_{air}} = \frac{k_{acrylic}}{k_{air}}
\end{equation}
As we know the dielectric constant of air is $k_{air} = 1$F/m then our equation is now.\\
\begin{equation}
  \frac{C_{acrylic}}{C_{air}} = k_{acrylic}
\end{equation}
Taking our average capacitances and solving for k we get. $k_{acrylic} = 2.32$F/m another way
we can determine this is by determining the slope of our trendline. Giving us another $k_{acrylic} = 2.24$F/m.
We will take the average of these two giving us a final $k_{acrylic} = 2.28$F/m.\\
\subsection*{Cylindrical Capacitor}

% 1.Find the theoretical value for the capacitance of the cylindrical capacitor
First let's determine the theoretical capacitance of the cylindrical capacitor. We can 
determine this by using equation~\ref*{CCeq}

\begin{equation}\label{CCeq}
  C = \frac{2\pi k \epsilon_{o}L}{\ln(\frac{b}{a})}
\end{equation}
Where a is the inner radius, b is the outer radius, k is the dielectric constant, and L is the length of the capacitor. 
Assuming our dielectric constant is the same constant we measured for the parrallel plate capacitance of $k = 2.28$F/m.
Plugging in we get the following $C = 2.88 10^{-11}\text{F} = 28.8\text{pF}$.\\
% 2.Compare the theoretical and experimental values of capacitance for the cylindrical capacitor using
% percent error.
Comparing this to our measured values using equation \ref*{Pe} we get a $P_{e} = 480\%$.\\

% 3.Use Gauss's Law to outline the derivation of the concentric cylinder capacitor without dielectric
% eq(5).
To derive equation \ref*{CCeq} we will use Equation \ref*{Cap}.\\
\begin{equation}\label*{Cap}
  C = \frac{q}{V}
\end{equation}
Then we will solve for v in terms of Equation \ref*{Volt}.\\
\begin{equation}\label{Volt}
  V = \int_{a}^{b}(E)dr
\end{equation}

Then we will use one last equation being Equation~\ref*{Guass}.\\
\begin{equation}\ref*{Guass}
  \frac{q}{\epsilon_{o}} = EA
\end{equation}

Solving for E in equation \ref*{Guass}:\\
$E = \frac{q}{A\epsilon_{o}}$.\\
Since $A = 2\pi rl$ then $E = \frac{q}{2\pi rl\epsilon_{o}}$
Then plugging E into~\ref*{Volt}:\\
$V = \int_{a}^{b}\frac{q}{2\pi rl\epsilon_{o}} dr$\\
$V = \frac{q}{2\pi l\epsilon_{o}} [_{b}^{a}ln(r)]$\\
$V = \frac{q}{2\pi l\epsilon_{o}} [ln(b) - ln(a)] = \frac{q}{2\pi l\epsilon_{o}} (ln(\frac{b}{a}))$.\\
Now that we've obtained V we can now plug V into Equation~\ref*{Cap}.\\
$C = \frac{q}{\frac{q}{2\pi l\epsilon_{o}} (ln(\frac{b}{a}))}$.\\
Now cleaning up we get Equation~\ref*{fin}\\
\begin{equation}\label{fin}
  C = \frac{2\pi\epsilon_{o}L}{\ln(\frac{b}{a})}
\end{equation}

% --- Questions --- %
\section{Questions}
\begin{enumerate}
  \item Suppose that you suspect that the dielectric constant for air is not really one; describe how
  would you use your data from section 6.4.1 to determine $k_{air}$. Assume that the movable
  metallic plates have a perfect circular shape.\\

  To determine this we can use equation~\ref*{dik}. As we know the capacitance, distance, and the area
  we could then solve for $k_{air}$. In the following equation:
  \begin{equation}
    k_{air} = \frac{Cd}{\epsilon_{oA}}
  \end{equation}
\end{enumerate}

% --- Conclusion --- %
\section{Discussion and Conclusion}
In this lab, we learned about capacitors and how capacitance varies through the capacitor's shape,
the material inbetween the plates, and how the arrangement of capacitors affects capacitance. Using 
different materials you can achieve a higher capacitance than you could using air. We had minimal error 
for the parallel plate capacitor and circuits all being less than $10\%$. The circuit errors could be 
due to inaccuracy with our measuring tools. The parrallel plate could be since the acrylic we used 
was not circular. The cylindrical capacitor had a massive margin of error being over $100\%$. This 
could be due to defects in the capacitor or us improperly setting up the capacitor and measuring 
incorrectly.\\
% --- Appendix ---
\section*{Appendix}\newpage
\includepdf[pages={1-3}]{Data.pdf}
All code was generated with the following snippets of python code.]

\begin{lstlisting}[language=Python, caption={Python code for generating Capacitance of air vs Acrylic}]

def Capactiance(x,y):
  plot = plt.subplot()


  const = trendline(x,y)
  print(const)
  trendy = []
  for i in x:
      trendy.append(const * i)
  print(const)

  plot.set_title("Capacitance Acrylic vs Air Capacitance.")
  plt.plot(x,trendy,"r--", label="Slope = {}F/m".format(round(const,2)))
  plot.legend()

  plot.set_xlabel("Capacitance of Air (pF)")
  plot.set_ylabel("Capacitance of Acrylic (pF)")

  plot.scatter(x,y)
  plt.show()  

  \end{lstlisting}

\begin{lstlisting}[language=Python, caption={Python code for generating the slope of the trend line}]

def trendline(x, y):
    xbar = 0
    ybar = 0
    num = 0
    den = 0

    for i in range(len(x)):
        xbar += x[i]
        ybar += y[i]
    xbar /= len(x)
    ybar /= len(y)

    for i in range(len(x)):
        num = (x[i] - xbar) * (y[i] - ybar)
        den = (x[i] - xbar)**2
        print(num, den)

    return num/den

  \end{lstlisting}


% Insert PDF
\end{document}